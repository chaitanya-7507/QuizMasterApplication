<div class="auth-container">
  <div class="auth-card">
    <h2>{{ loginMode ? 'Login' : 'Sign Up' }}</h2>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="auth-form">
      <!-- Role Selection -->
      <label>Role</label>
      <select formControlName="role">
        <option *ngFor="let r of roles" [value]="r">{{ r }}</option>
      </select>

      <!-- Username (Signup only) -->
      <div *ngIf="!loginMode">
        <label>Username</label>
        <input
          formControlName="username"
          type="text"
          placeholder="Enter username"
          [class.invalid]="f['username'].invalid && f['username'].touched" />
        <small class="error" *ngIf="f['username'].touched && f['username'].errors?.['required']">
          Username is required
        </small>
      </div>

      <!-- Email -->
      <label>Email</label>
      <input
        formControlName="email"
        type="email"
        placeholder="Enter email"
        [class.invalid]="f['email'].invalid && f['email'].touched" />
      <small class="error" *ngIf="f['email'].touched && f['email'].errors?.['required']">
        Email is required
      </small>
      <small class="error" *ngIf="f['email'].touched && f['email'].errors?.['email']">
        Invalid email format
      </small>

      <!-- Password -->
      <label>Password</label>
      <input
        formControlName="password"
        type="password"
        placeholder="Enter password"
        [class.invalid]="f['password'].invalid && f['password'].touched" />

      <!-- Login Password Rule -->
      <small class="error" *ngIf="loginMode && f['password'].touched && f['password'].errors?.['required']">
        Password is required
      </small>

      <!-- Signup Strong Password Rule -->
      <div *ngIf="!loginMode">
        <small class="error" *ngIf="f['password'].touched && f['password'].errors?.['required']">
          Password is required
        </small>
        <small class="error" *ngIf="f['password'].touched && f['password'].errors?.['pattern']">
          Must include 8â€“12 chars, with uppercase, lowercase, number, and special character.
        </small>
      </div>

      <!-- Submit -->
      <button type="submit" class="btn primary" [disabled]="form.invalid">
        {{ loginMode ? 'Login' : 'Sign Up' }}
      </button>
    </form>

    <!-- Switch between Login and Signup -->
    <p class="switch">
      {{ loginMode ? "Don't have an account?" : "Already have an account?" }}
      <span class="link" (click)="toggleMode()">
        {{ loginMode ? 'Create one' : 'Login' }}
      </span>
    </p>
  </div>
</div>
