<!-- QUIZ SECTION -->
<div class="quiz-wrapper" *ngIf="questions.length && !quizCompleted">
  <div class="quiz-container">
    <h2>ğŸ§  Question {{ currentQuestionIndex + 1 }} of {{ questions.length }}</h2>
    <p class="question">{{ questions[currentQuestionIndex].questionText }}</p>

    <div class="options">
      <div
        *ngFor="let opt of (questions[currentQuestionIndex].options | keyvalue)"
        class="option"
        [class.selected]="selectedAnswer === opt.key"
        (click)="selectAnswer(opt.key)"
      >
        <strong>{{ opt.key | uppercase }}.</strong> {{ opt.value }}
      </div>
    </div>

    <div class="navigation-buttons">
      <button (click)="previousQuestion()" [disabled]="currentQuestionIndex === 0">
        â¬… Previous
      </button>
      <button (click)="nextQuestion()" [disabled]="!selectedAnswer">
        {{ currentQuestionIndex === questions.length - 1 ? 'Finish Quiz' : 'Next â¡' }}
      </button>
    </div>
  </div>

  <!-- Right-side Question Tracker -->
  <div class="status-panel">
    <h3>Question Tracker</h3>
    <div class="tracker">
      <div
        *ngFor="let q of questions; let i = index"
        class="circle"
        [ngClass]="{
          attempted: userAnswers[i],
          current: i === currentQuestionIndex
        }"
        (click)="goToQuestion(i)"
        [attr.data-tooltip]="'Question ' + (i + 1)"
      >
        {{ i + 1 }}
      </div>
    </div>
  </div>
</div>

<!-- âœ… QUIZ RESULT SECTION (Visible after completion) -->
<div class="result" *ngIf="quizCompleted">
  <h2>ğŸ‰ Quiz Completed!</h2>
  <p>You scored {{ score }} out of {{ questions.length }}</p>
  <p>
    Result:
    <strong [style.color]="(score / questions.length) * 100 >= 50 ? 'green' : 'red'">
      {{ (score / questions.length) * 100 >= 50 ? 'Pass' : 'Fail' }}
    </strong>
  </p>
  <p>Percentage: {{ (score / questions.length) * 100 | number: '1.0-0' }}%</p>

  <button (click)="restartQuiz()">ğŸ”Restart</button>
  <button (click)="backToDashboard()">ğŸ Back to Dashboard</button>
</div>
